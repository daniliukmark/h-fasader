"use strict";(()=>{var e={};e.id=649,e.ids=[649],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3655:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>S,originalPathname:()=>R,patchFetch:()=>M,requestAsyncStorage:()=>N,routeModule:()=>T,serverHooks:()=>x,staticGenerationAsyncStorage:()=>P,staticGenerationBailout:()=>A});var n={};r.r(n),r.d(n,{GET:()=>v,POST:()=>v});var a=r(884),o=r(6132),s=r(1040),i=r(4404),u=r(7914),c=r(4057),l=r(3705);let d=(e,t)=>void 0!==e?t.input.deserialize(e):e,p={GET:"query",POST:"mutation"},h={getInputs:e=>{let t=function(e){let{req:t}=e;try{if("GET"===t.method){if(!t.query.has("input"))return;let e=t.query.get("input");return JSON.parse(e)}if(!e.preprocessedBody&&"string"==typeof t.body)return 0===t.body.length?void 0:JSON.parse(t.body);return t.body}catch(e){throw new c.T({code:"PARSE_ERROR",cause:e})}}(e),r=e.router._def._config.transformer;if(!e.isBatchCall)return{0:d(t,r)};if(null==t||"object"!=typeof t||Array.isArray(t))throw new c.T({code:"BAD_REQUEST",message:'"input" needs to be an object when doing a batch call'});let n={};for(let e in t){let a=t[e],o=d(a,r);n[e]=o}return n}};function f(e){let{ctx:t,paths:r,type:n,responseMeta:a,untransformedJSON:o,errors:s=[]}=e,u=o?(0,i.b)(o):200,c={"Content-Type":"application/json"},l=!o,d=l?[]:Array.isArray(o)?o:[o],p=a?.({ctx:t,paths:r,type:n,data:d,errors:s,eagerGeneration:l})??{};for(let[e,t]of Object.entries(p.headers??{}))c[e]=t;return p.status&&(u=p.status),{status:u,headers:c}}async function m(e){let{opts:t,ctx:r,type:n,input:a,path:o}=e;try{let e=await (0,u.b)({procedures:t.router._def.procedures,path:o,rawInput:a,ctx:r,type:n});return{result:{data:e}}}catch(s){let e=(0,c.g)(s);return t.onError?.({error:e,path:o,input:a,ctx:r,type:n,req:t.req}),{error:(0,l.g)({config:t.router._def._config,error:e,type:n,path:o,input:a,ctx:r})}}}function g(e,t){let{router:r,req:n,onError:a}=t.opts,o=(0,c.g)(e);a?.({error:o,path:t.path,input:t.input,ctx:t.ctx,type:t.type,req:n});let s={error:(0,l.g)({config:r._def._config,error:o,type:t.type,path:t.path,input:t.input,ctx:t.ctx})},i=(0,l.t)(r._def._config,s),u=JSON.stringify(i);return{error:o,untransformedJSON:s,body:u}}async function y(e){let t,r;let{router:n,req:a,unstable_onHead:o,unstable_onChunk:s}=e;if("HEAD"===a.method){let e={status:204};return o?.(e,!1),s?.([-1,""]),e}let i=e.contentTypeHandler??h,u=e.batching?.enabled??!0,d=p[a.method]??"unknown",y=!!a.query.get("batch"),w=y&&o&&s&&"stream"===a.headers["trpc-batch-mode"];try{if(r=await e.createContext(),e.error)throw e.error;if(y&&!u)throw Error("Batching is not enabled on the server");/* istanbul ignore if -- @preserve */if("subscription"===d)throw new c.T({message:"Subscriptions should use wsLink",code:"METHOD_NOT_SUPPORTED"});if("unknown"===d)throw new c.T({message:`Unexpected request method ${a.method}`,code:"METHOD_NOT_SUPPORTED"});let p=await i.getInputs({isBatchCall:y,req:a,router:n,preprocessedBody:e.preprocessedBody??!1});t=y?decodeURIComponent(e.path).split(","):[e.path];let h=t.map((t,n)=>m({opts:e,ctx:r,type:d,input:p[n],path:t}));if(!w){let a=await Promise.all(h),i=a.flatMap(e=>"error"in e?[e.error]:[]),u=f({ctx:r,paths:t,type:d,responseMeta:e.responseMeta,untransformedJSON:a,errors:i});o?.(u,!1);let c=y?a:a[0],p=(0,l.t)(n._def._config,c),m=JSON.stringify(p);return s?.([-1,m]),{status:u.status,headers:u.headers,body:m}}let b=f({ctx:r,paths:t,type:d,responseMeta:e.responseMeta});o(b,!0);let E=new Map(h.map((e,t)=>[t,e.then(e=>[t,e])]));for(let a of t){let[a,o]=await Promise.race(E.values());E.delete(a);try{let e=(0,l.t)(n._def._config,o),t=JSON.stringify(e);s([a,t])}catch(u){let n=t[a],o=p[a],{body:i}=g(u,{opts:e,ctx:r,type:d,path:n,input:o});s([a,i])}}return}catch(c){let{error:n,untransformedJSON:a,body:i}=g(c,{opts:e,ctx:r,type:d}),u=f({ctx:r,paths:t,type:d,responseMeta:e.responseMeta,untransformedJSON:a,errors:[n]});return o?.(u,!1),s?.([-1,i]),{status:u.status,headers:u.headers,body:i}}}r(2266);let w=e=>e=(e=e.startsWith("/")?e.slice(1):e).endsWith("/")?e.slice(0,-1):e;async function b(e){let t,r,n,a;let o=new Headers,s=async()=>e.createContext?.({req:e.req,resHeaders:o}),i=new URL(e.req.url),u=w(i.pathname),c=w(e.endpoint),l=w(u.slice(c.length)),d={query:i.searchParams,method:e.req.method,headers:Object.fromEntries(e.req.headers),body:e.req.headers.get("content-type")?.startsWith("application/json")?await e.req.text():""},p=new Promise(e=>t=e),h=200,f=!1;return y({req:d,createContext:s,path:l,router:e.router,batching:e.batching,responseMeta:e.responseMeta,onError(t){e?.onError?.({...t,req:e.req})},unstable_onHead:(e,s)=>{for(let[t,r]of Object.entries(e.headers??{}))/* istanbul ignore if -- @preserve */if(void 0!==r){if("string"==typeof r){o.set(t,r);continue}for(let e of r)o.append(t,e)}if(h=e.status,s){o.set("Transfer-Encoding","chunked"),o.append("Vary","trpc-batch-mode");let e=new ReadableStream({start(e){r=e}}),s=new Response(e,{status:h,headers:o});t(s),n=new TextEncoder,a=function(){let e=!0;function t(t,r){let n=e?"{":",";return e=!1,`${n}"${t}":${r}
`}return t.end=()=>"}",t}(),f=!0}},unstable_onChunk:([e,s])=>{if(-1===e){let e=new Response(s||null,{status:h,headers:o});t(e)}else r.enqueue(n.encode(a(e,s)))}}).then(()=>{f&&(r.enqueue(n.encode(a.end())),r.close())}).catch(()=>{f&&r.close()}),p}var E=r(5110),O=r(3187),q=r(1267);let _=async e=>(0,q.uw)({headers:e.headers}),v=e=>b({endpoint:"/api/trpc",req:e,router:O.q,createContext:()=>_(e),onError:"development"===E.O.NODE_ENV?({path:e,error:t})=>{console.error(`❌ tRPC failed on ${e??"<no-path>"}: ${t.message}`)}:void 0}),T=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/trpc/[trpc]/route",pathname:"/api/trpc/[trpc]",filename:"route",bundlePath:"app/api/trpc/[trpc]/route"},resolvedPagePath:"/Users/markdaniliuk/Documents/Projects/Current/h-fasader/src/app/api/trpc/[trpc]/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:N,staticGenerationAsyncStorage:P,serverHooks:x,headerHooks:S,staticGenerationBailout:A}=T,R="/api/trpc/[trpc]/route";function M(){return(0,s.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:P})}},884:(e,t,r)=>{e.exports=r(517)},3187:(e,t,r)=>{r.d(t,{q:()=>s});var n=r(1287),a=r(1267);let o=(0,a.hA)({hello:a.$y.input(n.z.object({text:n.z.string()})).query(({input:e})=>({greeting:`Hello ${e.text}`})),getAll:a.$y.input(n.z.object({limit:n.z.number(),lang:n.z.string(),material:n.z.enum(["pvc","aluminium"])})).query(({ctx:e,input:t})=>{let{limit:r,lang:n,material:a}=t;return e.db.window.findMany({where:{material:a},take:r,include:{translation:{select:{title:!0,desc:!0,specs:!0,accs:!0},where:{lang:n}},mainImage:{select:{url:!0}},images:{select:{url:!0}}}})}),getById:a.$y.input(n.z.object({id:n.z.string(),lang:n.z.string(),material:n.z.enum(["pvc","aluminium"])})).query(({ctx:e,input:t})=>{let{id:r,lang:n,material:a}=t;return e.db.window.findFirst({where:{id:r,material:a},include:{translation:{select:{title:!0,desc:!0,specs:!0,accs:!0},where:{lang:n}},mainImage:{select:{url:!0}},images:{select:{url:!0}}}})})}),s=(0,a.hA)({window:o})},1267:(e,t,r)=>{r.d(t,{uw:()=>l,hA:()=>p,$y:()=>h});var n=r(4273),a=r(2411),o=r(1287);let s=require("@prisma/client");var i=r(5110);let u=globalThis,c=u.prisma??new s.PrismaClient({log:"development"===i.O.NODE_ENV?["query","error","warn"]:["error"]});"production"!==i.O.NODE_ENV&&(u.prisma=c);let l=async e=>({db:c,...e}),d=n.rN.context().create({transformer:a.ZP,errorFormatter:({shape:e,error:t})=>({...e,data:{...e.data,zodError:t.cause instanceof o.jm?t.cause.flatten():null}})}),p=d.router,h=d.procedure},5110:(e,t,r)=>{r.d(t,{O:()=>o});var n=r(2498),a=r(1287);let o=(0,n.D)({server:{NODE_ENV:a.z.enum(["development","test","production"]).default("development")},client:{},runtimeEnv:{NODE_ENV:"production"},skipValidation:!!process.env.SKIP_ENV_VALIDATION,emptyStringAsUndefined:!0})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[494,915],()=>r(3655));module.exports=n})();