"use strict";exports.id=357,exports.ids=[357],exports.modules={6357:(e,t,r)=>{r.d(t,{ss:()=>u,K5:()=>O,gb:()=>k});class n extends Error{constructor(e){super(e),this.name="ObservableAbortError",Object.setPrototypeOf(this,n.prototype)}}var o=r(6596);function s(e){return!!e&&!Array.isArray(e)&&"object"==typeof e}class i extends Error{constructor(){super("Unable to transform response from server")}}function l(e,t){let r;try{r=function(e,t){if("error"in e){let r=t.transformer.deserialize(e.error);return{ok:!1,error:{...e,error:r}}}let r={...e.result,...(!e.result.type||"data"===e.result.type)&&{type:"data",data:t.transformer.deserialize(e.result.data)}};return{ok:!0,result:r}}(e,t)}catch(e){throw new i}if(!r.ok&&(!s(r.error.error)||"number"!=typeof r.error.error.code)||r.ok&&!s(r.result))throw new i;return r}class u extends Error{static from(e,t={}){return e instanceof u||e instanceof Error&&"TRPCClientError"===e.name?(t.meta&&(e.meta={...e.meta,...t.meta}),e):s(e)&&s(e.error)&&"number"==typeof e.error.code&&"string"==typeof e.error.message?new u(e.error.message,{...t,result:e}):e instanceof Error?new u(e.message,{...t,cause:e}):new u("Unknown error",{...t,cause:e})}constructor(e,t){let r=t?.cause;super(e,{cause:r}),this.meta=t?.meta,this.cause=r,this.shape=t?.result?.error,this.data=t?.result?.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,u.prototype)}}var a=r(4404);r(3705),r(2266);let c=e=>"function"==typeof e;function p(e){var t;return{url:e.url.toString().replace(/\/$/,""),fetch:e.fetch,AbortController:(t=e.AbortController)?t:"undefined"!=typeof globalThis&&globalThis.AbortController?globalThis.AbortController:null}}let f={query:"GET",mutation:"POST"};function d(e){return"input"in e?e.runtime.transformer.serialize(e.input):function(e){let t={};for(let r=0;r<e.length;r++){let n=e[r];t[r]=n}return t}(e.inputs.map(t=>e.runtime.transformer.serialize(t)))}let h=e=>{let t=e.url+"/"+e.path,r=[];if("inputs"in e&&r.push("batch=1"),"query"===e.type){let t=d(e);void 0!==t&&r.push(`input=${encodeURIComponent(JSON.stringify(t))}`)}return r.length&&(t+="?"+r.join("&")),t},m=e=>{if("query"===e.type)return;let t=d(e);return void 0!==t?JSON.stringify(t):void 0},b=e=>g({...e,contentTypeHeader:"application/json",getUrl:h,getBody:m});async function y(e,t){let r=e.getUrl(e),n=e.getBody(e),{type:o}=e,s=await e.headers();/* istanbul ignore if -- @preserve */if("subscription"===o)throw Error("Subscriptions should use wsLink");let i={...e.contentTypeHeader?{"content-type":e.contentTypeHeader}:{},...e.batchModeHeader?{"trpc-batch-mode":e.batchModeHeader}:{},...s};return(function(e){if(e)return e;if("undefined"!=typeof globalThis&&c(globalThis.fetch))return globalThis.fetch;throw Error("No fetch implementation found")})(e.fetch)(r,{method:f[o],signal:t?.signal,body:n,headers:i})}function g(e){let t=e.AbortController?new e.AbortController:null,r={},n=!1,o=new Promise((o,s)=>{y(e,t).then(e=>(r.response=e,n=!0,e.json())).then(e=>{r.responseJSON=e,o({json:e,meta:r})}).catch(e=>{n=!0,s(u.from(e,{meta:r}))})});return{promise:o,cancel:()=>{n||t?.abort()}}}let x=()=>{throw Error("Something went wrong. Please submit an issue at https://github.com/trpc/trpc/issues/new")};function w(e){let t=null,r=null,n=()=>{clearTimeout(r),r=null,t=null};function o(){let r=function(t){let r=[[]],n=0;for(;;){let o=t[n];if(!o)break;let s=r[r.length-1];if(o.aborted){o.reject?.(Error("Aborted")),n++;continue}let i=e.validate(s.concat(o).map(e=>e.key));if(i){s.push(o),n++;continue}if(0===s.length){o.reject?.(Error("Input is too big for a single dispatch")),n++;continue}r.push([])}return r}(t);for(let t of(n(),r)){if(!t.length)continue;let r={items:t,cancel:x};for(let e of t)e.batch=r;let n=(e,t)=>{let n=r.items[e];n.resolve?.(t),n.batch=null,n.reject=null,n.resolve=null},{promise:o,cancel:s}=e.fetch(r.items.map(e=>e.key),n);r.cancel=s,o.then(e=>{for(let t=0;t<e.length;t++){let r=e[t];n(t,r)}for(let e of r.items)e.reject?.(Error("Missing result")),e.batch=null}).catch(e=>{for(let t of r.items)t.reject?.(e),t.batch=null})}}return{load:function(e){let n={aborted:!1,key:e,batch:null,resolve:x,reject:x},s=new Promise((e,r)=>{n.reject=r,n.resolve=e,t||(t=[]),t.push(n)});return r||(r=setTimeout(o)),{promise:s,cancel:()=>{n.aborted=!0,n.batch?.items.every(e=>e.aborted)&&(n.batch.cancel(),n.batch=null)}}}}}function j(e){return function(t){let r=p(t),n=t.maxURLLength??1/0;return s=>{let i=o=>{let i=e({...r,runtime:s,type:o,opts:t});return{validate:e=>{if(n===1/0)return!0;let t=e.map(e=>e.path).join(","),i=e.map(e=>e.input),l=h({...r,runtime:s,type:o,path:t,inputs:i});return l.length<=n},fetch:i}},a=w(i("query")),c=w(i("mutation")),p=w(i("subscription")),f={query:a,subscription:p,mutation:c};return({op:e})=>(0,o.o)(t=>{let r;let n=f[e.type],{promise:o,cancel:i}=n.load(e);return o.then(e=>{r=e;let n=l(e.json,s);if(!n.ok){t.error(u.from(n.error,{meta:e.meta}));return}t.next({context:e.meta,result:n.result}),t.complete()}).catch(e=>{t.error(u.from(e,{meta:r?.meta}))}),()=>{i()}})}}}function E(e){return t=>{let r=p(t);return n=>({op:s})=>(0,o.o)(o=>{let i;let{path:a,input:c,type:p}=s,{promise:f,cancel:d}=e.requester({...r,runtime:n,type:p,path:a,input:c,headers:()=>t.headers?"function"==typeof t.headers?t.headers({op:s}):t.headers:{}});return f.then(e=>{i=e.meta;let t=l(e.json,n);if(!t.ok){o.error(u.from(t.error,{meta:i}));return}o.next({context:e.meta,result:t.result}),o.complete()}).catch(e=>{o.error(u.from(e,{meta:i}))}),()=>{d()}})}}j(e=>t=>{let r=t.map(e=>e.path).join(","),n=t.map(e=>e.input),{promise:o,cancel:s}=b({...e,path:r,inputs:n,headers:()=>e.opts.headers?"function"==typeof e.opts.headers?e.opts.headers({opList:t}):e.opts.headers:{}});return{promise:o.then(e=>{let r=Array.isArray(e.json)?e.json:t.map(()=>e.json),n=r.map(t=>({meta:e.meta,json:t}));return n}),cancel:s}}),E({requester:b});let T={css:{query:["72e3ff","3fb0d8"],mutation:["c5a3fc","904dfc"],subscription:["ff49e1","d83fbe"]},ansi:{regular:{query:["\x1b[30;46m","\x1b[97;46m"],mutation:["\x1b[30;45m","\x1b[97;45m"],subscription:["\x1b[30;42m","\x1b[97;42m"]},bold:{query:["\x1b[1;30;46m","\x1b[1;97;46m"],mutation:["\x1b[1;30;45m","\x1b[1;97;45m"],subscription:["\x1b[1;30;42m","\x1b[1;97;42m"]}}},q=({c:e=console,colorMode:t="css"})=>r=>{let n=r.input,o="undefined"!=typeof FormData&&n instanceof FormData?Object.fromEntries(n):n,{parts:s,args:i}=function(e){let{direction:t,type:r,path:n,id:o,input:s}=e,i=[],l=[];if("ansi"===e.colorMode){let[s,u]=T.ansi.regular[r],[a,c]=T.ansi.bold[r];return i.push("up"===t?s:u,"up"===t?">>":"<<",r,"up"===t?a:c,`#${o}`,n,"\x1b[0m"),"up"===t?l.push({input:e.input}):l.push({input:e.input,result:"result"in e.result?e.result.result:e.result,elapsedMs:e.elapsedMs}),{parts:i,args:l}}let[u,a]=T.css[r],c=`
    background-color: #${"up"===t?u:a}; 
    color: ${"up"===t?"black":"white"};
    padding: 2px;
  `;return i.push("%c","up"===t?">>":"<<",r,`#${o}`,`%c${n}%c`,"%O"),l.push(c,`${c}; font-weight: bold;`,`${c}; font-weight: normal;`),"up"===t?l.push({input:s,context:e.context}):l.push({input:s,result:e.result,elapsedMs:e.elapsedMs,context:e.context}),{parts:i,args:l}}({...r,colorMode:t,input:o}),l="down"===r.direction&&r.result&&(r.result instanceof Error||"error"in r.result.result)?"error":"log";e[l].apply(null,[s.join(" ")].concat(i))};function k(e={}){let{enabled:t=()=>!0}=e,r=e.colorMode??"ansi",{logger:n=q({c:e.console,colorMode:r})}=e;return()=>({op:e,next:r})=>(0,o.o)(o=>{var s;t({...e,direction:"up"})&&n({...e,direction:"up"});let i=Date.now();function l(r){let o=Date.now()-i;t({...e,direction:"down",result:r})&&n({...e,direction:"down",elapsedMs:o,result:r})}return r(e).pipe((s={next(e){l(e)},error(e){l(e)}},e=>({subscribe:t=>e.subscribe({next(e){s.next?.(e),t.next?.(e)},error(e){s.error?.(e),t.error?.(e)},complete(){s.complete?.(),t.complete?.()}})}))).subscribe(o)})}class v{$request({type:e,input:t,path:r,context:n={}}){var s;let i=(s={links:this.links,op:{id:++this.requestId,type:e,path:r,input:t,context:n}},(0,o.o)(e=>{let t=function e(t=0,r=s.op){let n=s.links[t];if(!n)throw Error("No more links to execute - did you forget to add an ending link?");let o=n({op:r,next(r){let n=e(t+1,r);return n}});return o}();return t.subscribe(e)}));return i.pipe(e=>{let t=0,r=null,n=[];return{subscribe:o=>(t++,n.push(o),r||(r=e.subscribe({next(e){for(let t of n)t.next?.(e)},error(e){for(let t of n)t.error?.(e)},complete(){for(let e of n)e.complete?.()}})),{unsubscribe(){t--,function(){if(0===t&&r){let e=r;r=null,e.unsubscribe()}}();let e=n.findIndex(e=>e===o);e>-1&&n.splice(e,1)}})}})}requestAsPromise(e){let t=this.$request(e),{promise:r,abort:o}=function(e){let t;let r=new Promise((r,o)=>{let s=!1;function i(){s||(s=!0,o(new n("This operation was aborted.")),l.unsubscribe())}let l=e.subscribe({next(e){s=!0,r(e),i()},error(e){s=!0,o(e),i()},complete(){s=!0,i()}});t=i});return{promise:r,abort:t}}(t),s=new Promise((t,n)=>{e.signal?.addEventListener("abort",o),r.then(e=>{t(e.result.data)}).catch(e=>{n(u.from(e))})});return s}query(e,t,r){return this.requestAsPromise({type:"query",path:e,input:t,context:r?.context,signal:r?.signal})}mutation(e,t,r){return this.requestAsPromise({type:"mutation",path:e,input:t,context:r?.context,signal:r?.signal})}subscription(e,t,r){let n=this.$request({type:"subscription",path:e,input:t,context:r?.context});return n.subscribe({next(e){"started"===e.result.type?r.onStarted?.():"stopped"===e.result.type?r.onStopped?.():r.onData?.(e.result.data)},error(e){r.onError?.(e)},complete(){r.onComplete?.()}})}constructor(e){this.requestId=0;let t=(()=>{let t=e.transformer;return t?"input"in t?e.transformer:{input:t,output:t}:{input:{serialize:e=>e,deserialize:e=>e},output:{serialize:e=>e,deserialize:e=>e}}})();this.runtime={transformer:{serialize:e=>t.input.serialize(e),deserialize:e=>t.output.deserialize(e)},combinedTransformer:t},this.links=e.links.map(e=>e(this.runtime))}}let A={query:"query",mutate:"mutation",subscribe:"subscription"},C=e=>A[e];function O(e){let t=new v(e),r=(0,a.c)(e=>t.hasOwnProperty(e)?t[e]:"__untypedClient"===e?t:(0,a.a)(({path:r,args:n})=>{let o=[e,...r],s=C(o.pop()),i=o.join(".");return t[s](i,...n)}));return r}async function P(e){let t=e.parse??JSON.parse;await D(e.readableStream,r=>{if(e.signal?.aborted||!r||"}"===r)return;let n=r.indexOf(":"),o=r.substring(2,n-1),s=r.substring(n+1);e.onSingle(Number(o),t(s))},e.textDecoder)}async function D(e,t,r){let n="",o=e=>{let o=r.decode(e),s=o.split("\n");if(1===s.length)n+=s[0];else if(s.length>1){t(n+s[0]);for(let e=1;e<s.length-1;e++)t(s[e]);n=s[s.length-1]}};"getReader"in e?await S(e,o):await new Promise(t=>{e.on("data",o),e.on("end",t)}),t(n)}async function S(e,t){let r=e.getReader(),n=await r.read();for(;!n.done;)t(n.value),n=await r.read()}let $=(e,t)=>{let r=e.AbortController?new e.AbortController:null,n=y({...e,contentTypeHeader:"application/json",batchModeHeader:"stream",getUrl:h,getBody:m},r),o=n.then(async n=>{if(!n.body)throw Error("Received response without body");let o={response:n};return P({readableStream:n.body,onSingle:t,parse:e=>({json:JSON.parse(e),meta:o}),signal:r?.signal,textDecoder:e.textDecoder})});return{cancel:()=>r?.abort(),promise:o}};j(e=>{let t=function(e){if(e)return e;if("undefined"!=typeof globalThis&&globalThis.TextDecoder)return new globalThis.TextDecoder;throw Error("No TextDecoder implementation found")}(e.opts.textDecoder);return(r,n)=>{let o=r.map(e=>e.path).join(","),s=r.map(e=>e.input),{cancel:i,promise:l}=$({...e,textDecoder:t,path:o,inputs:s,headers:()=>e.opts.headers?"function"==typeof e.opts.headers?e.opts.headers({opList:r}):e.opts.headers:{}},(e,t)=>{n(e,t)});return{promise:l.then(()=>[]),cancel:i}}});let z=e=>{if("input"in e){if(!(e.input instanceof FormData))throw Error("Input is not FormData");return e.input}};E({requester:e=>{if("mutation"!==e.type)throw Error("We only handle mutations with formdata");return g({...e,getUrl:()=>`${e.url}/${e.path}`,getBody:z})}})},6596:(e,t,r)=>{function n(e){let t={subscribe(t){let r=null,n=!1,o=!1,s=!1;function i(){if(null===r){s=!0;return}!o&&(o=!0,"function"==typeof r?r():r&&r.unsubscribe())}return r=e({next(e){n||t.next?.(e)},error(e){n||(n=!0,t.error?.(e),i())},complete(){n||(n=!0,t.complete?.(),i())}}),s&&i(),{unsubscribe:i}},pipe:(...e)=>(0===e.length?function(e){return e}:1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)})(t)};return t}r.d(t,{o:()=>n})}};